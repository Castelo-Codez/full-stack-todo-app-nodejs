import{$removeError,$setError}from"./globalfuntions.js";const form=document.querySelector("form");null==form||form.addEventListener("submit",async e=>{e.preventDefault();let $credetialsHasError={email:validator.isEmail(form.email.value)?{error:!1,type:"email"}:{error:!0,type:"email",message:"please enter a valid email"},password:form.password.value.length<8?{error:!0,type:"password",message:"must be at least 8 characters"}:form.password.value.length>=8?{error:!1,type:"password"}:{error:!0,type:"password",message:"can't be empty"}};for(let[key,value]of Object.entries($credetialsHasError))"string"!=typeof value&&value.error&&$setError(value),"string"==typeof value||value.error||$removeError(value);"string"==typeof $credetialsHasError.email||$credetialsHasError.email.error||"string"==typeof $credetialsHasError.password||$credetialsHasError.password.error||axios.post("/login",{email:form.email.value,password:form.password.value}).then(res=>{window.location.assign("/")}).catch(error=>{$setError({error:!0,type:"email",message:"please check your email"}),$setError({error:!0,type:"password",message:"please check your password"})})});